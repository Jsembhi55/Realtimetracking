<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Realistic Delivery Tracking</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
body { font-family: Arial, sans-serif; background: #f2f4f7; padding: 20px; }
.card { max-width: 520px; margin: auto; background: white; border-radius: 10px; padding: 22px; box-shadow: 0 6px 15px rgba(0,0,0,0.1);}
h2 { text-align: center; margin-top: 0;}
.info { font-size: 14px; color: #555; margin-bottom: 10px;}
.timeline { position: relative; margin: 30px 0; height: 60px;}
.progress-bar { position: absolute; top: 50%; left: 0; right: 0; height: 6px; background: #ccc; border-radius:3px; transform: translateY(-50%);}
.dot { width: 20px; height: 20px; border-radius: 50%; background: #ccc; position: absolute; top: 50%; transform: translate(-50%,-50%); transition: background 0.3s, transform 0.3s;}
.dot.active { background: #28a745; transform: translate(-50%,-50%) scale(1.3);}
.dot.in-progress { background: #ffa500; transform: translate(-50%,-50%) scale(1.3);}
.truck { width: 30px; height: 20px; background: #007bff; border-radius: 4px; position: absolute; top: 50%; transform: translate(-50%,-50%); transition: left 1s;}
.step-label { position: absolute; top: 40px; transform: translateX(-50%); font-size: 13px; color: #555; text-align: center;}
.date { font-size: 11px; color: #888; margin-top: 2px;}
.btn { display:block; margin:auto; padding:10px 18px; background:#28a745; color:white; border:none; border-radius:5px; cursor:pointer; font-size:14px; margin-top:10px;}
.btn:hover { background:#218838;}
.btn.reset { background:#dc3545;}
input { width: calc(100% - 20px); margin:4px 0; padding:6px 10px; border-radius:5px; border:1px solid #ccc;}
.map { margin-top: 20px; height: 120px; background: #e6e6e6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #777; font-size: 14px;}
.footer { margin-top: 16px; text-align: center; font-size: 12px; color: #999;}
</style>
</head>
<body>

<div class="card">
<h2>Delivery Tracking</h2>

<div class="info">
  <label>Order ID:<br><input type="text" id="orderIdInput" value="44363"></label><br>
  <label>Driver:<br><input type="text" id="driverInput" value="David"></label><br>
  <label>Start Date:<br><input type="date" id="startDateInput"></label>
</div>

<button class="btn" id="startBtn">Start Order Preparing</button>
<button class="btn reset" id="resetBtn">Reset Order</button>

<div class="timeline">
  <div class="progress-bar"></div>
  <div class="dot" id="dotPrep" style="left:0%;"></div>
  <div class="dot" id="dotTransit" style="left:50%;"></div>
  <div class="dot" id="dotDelivered" style="left:100%;"></div>
  <div class="truck" id="truck" style="left:0%;"></div>

  <div class="step-label" style="left:0%;">Order Preparing<br><span class="date" id="prepDate"></span></div>
  <div class="step-label" style="left:50%;">In Transit<br><span class="date" id="transitDate"></span></div>
  <div class="step-label" style="left:100%;">Delivered<br><span class="date" id="deliveredDate"></span></div>
</div>

<div class="map">Driver location updates periodically</div>
<div class="footer">Local delivery tracking</div>
</div>

<script>
const startBtn = document.getElementById('startBtn');
const resetBtn = document.getElementById('resetBtn');
const orderInput = document.getElementById('orderIdInput');
const driverInput = document.getElementById('driverInput');
const startInput = document.getElementById('startDateInput');

const dotPrep = document.getElementById('dotPrep');
const dotTransit = document.getElementById('dotTransit');
const dotDelivered = document.getElementById('dotDelivered');
const truck = document.getElementById('truck');
const prepDateEl = document.getElementById('prepDate');
const transitDateEl = document.getElementById('transitDate');
const deliveredDateEl = document.getElementById('deliveredDate');

function updateTimeline() {
  const orderId = orderInput.value || "ORD-1001";
  const driver = driverInput.value || "Local Driver";

  document.getElementById('orderIdInput').value = orderId;
  document.getElementById('driverInput').value = driver;

  let startDateStr = localStorage.getItem('startDate');
  if (!startDateStr) return;

  const startDate = new Date(startDateStr);
  const today = new Date();
  startDate.setHours(0,0,0,0);
  today.setHours(0,0,0,0);

  const dayDiff = Math.floor((today - startDate) / (1000*60*60*24));

  const prepDate = new Date(startDate);
  const transitDate = new Date(startDate); transitDate.setDate(startDate.getDate()+1);
  const deliveredDate = new Date(startDate); deliveredDate.setDate(startDate.getDate()+5);

  const formatDate = d => d.toDateString();
  prepDateEl.textContent = formatDate(prepDate);
  transitDateEl.textContent = formatDate(transitDate);
  deliveredDateEl.textContent = formatDate(deliveredDate);

  // Reset classes
  [dotPrep,dotTransit,dotDelivered].forEach(dot=>{ dot.classList.remove('active','in-progress'); });

  // Set dot and truck positions
  if(dayDiff < 1){
    dotPrep.classList.add('active');
    truck.style.left = '0%';
  } else if(dayDiff >= 1 && dayDiff < 5){
    dotPrep.classList.add('active');
    dotTransit.classList.add('in-progress');
    let percent = 50 * (dayDiff/4); // moves from 50% gradually
    truck.style.left = percent + '%';
  } else {
    [dotPrep,dotTransit,dotDelivered].forEach(d=>d.classList.add('active'));
    truck.style.left = '100%';
  }
}

// Start order
startBtn.addEventListener('click', ()=>{
  const dateVal = startInput.value;
  if(!dateVal){ alert("Please select a start date"); return; }
  localStorage.setItem('startDate', dateVal);
  updateTimeline();
  startBtn.style.display='none';
});

// Reset order
resetBtn.addEventListener('click', ()=>{
  localStorage.removeItem('startDate');
  startBtn.style.display='block';
  prepDateEl.textContent='';
  transitDateEl.textContent='';
  deliveredDateEl.textContent='';
  [dotPrep,dotTransit,dotDelivered].forEach(dot=>dot.classList.remove('active','in-progress'));
  truck.style.left='0%';
});

window.onload = updateTimeline;
</script>

</body>
</html>
